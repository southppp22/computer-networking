## 네트워크 애플리케이션

애플리케이션: 운영체제 위에서 실행되는 프로세스
네트워크 애플리케이션: 다른 위치의 종단 시스템에서 동작하고 네트워크를 통해 서로 통신하는 프로그램

### 클라이언트 - 서버 구조

클라이언트 : 필요할 때만 액션 취함
서버 : 고정된 주소를 가지고 항상 동작하고있는 호스트

### 프로세스간 통신

프로세스: 프로그램을 OS에 의해 실행된 상태
프로세스 간 통신: 서로 다른 머신 위에 있는 프로세스간의 통신을 위해 파이프를 제공하는 것

소켓 인터페이스를 통해 프로세스 사이 통신을 하는데 메시지를 제대로 전달하기 위해서 주소를 정확히 해야한다.
**IP 주소**를 통해서 프로세스가 동작하는 호스트를 식별하고, **포트번호**로 해당 프로세스를 식별한다.

### 인터넷 전송 프로토콜이 제공하는 서비스

현재 인터넷 제공하는 전송 프로토콜은 두 가지가 있다.

- TCP
  - 연결지향형으로 핸드셰이킹 과정이 있음
  - 유실 없이 전송하기 때문에 신뢰성이 높음
- UDP
  - 비연결형으로 핸드셰이킹하지 않음
  - 메시지 수신 순서 도착 보장하지 않음

## HTTP

HTTP: HyperText Transfer Protocol
그림이나 영상같은 링크를 하이퍼텍스트라고함

HTTP는 TCP 기반으로 동작하기 때문에 중간에 유실되지 않고 투명성있게 서버와 통신 가능
TCP 서비스를 사용하기 이전에 TCP Connection이 서버와 맺어져야한다.

HTTP는 **Stateless**이다. 클라이언트에 대한 어떠한 상태도 기억하지 않는다.
덕분에 많은 요청을 빠르게 처리 가능

### 비지속 연결과 지속 연결

HTTP가 TCP를 사용하는 두 가지 방식

- non-persistent HTTP
  - request, response마다 매번 새로 TCP 연결을 생성함
- persistent HTTP
  - 한 번 생성한 TCP 연결을 유지해 계속 사용함

### HTTP 메시지 포맷

- HTTP request message 구조

  - request line - (get, post 등)
  - header lines - 부가정보(브라우저 정보 등)

- HTTP response message 구조
  - status line - http버전, 상태코드
  - header lines - 부가 정보
  - data

### **쿠키**

HTTP는 stateless 라서 사용자에 따라 컨텐츠를 제공하기 위해 쿠키 사용
http request header에 쿠키넣어서 요청

ex) 쿠키를 이용한 상태 유지

1. 쿠키 없으면 그냥 request
2. 서버에 대한 쿠키가 있다면 쿠키번호를 함께 보냄
3. 서버가 사용자에 대한 정보를 저장

### **웹 캐시**

= 프록시 서버
최근 호출된 객체의 사본을 저장 및 보존한다.

장점

- 빠름
- 서버 부하를 줄일 수 있음
- 트래픽이 줄어서 비용 절감

단점 (캐시의 단점)

- 일관성 문제

**일관성문제 해결 방안**
조건부 GET

- if-modified-since {date} 헤더를 포함
- 304 not modified 를 보내면 캐싱된 복사본을 사용

## DNS

hostname을 IP주소로 변환해주는 서비스

#### 분산 계층 데이터베이스

데이터베이스 하나에 구현하면 다운됐을 때 위험이 큼

- 루트 DNS 서버
  - TLD 서버의 IP 주소를 제공한다.
- 최상위 레벨 도메인 서버
  - com, org 같은 상위 레벨 도메인과 kr, uk 같은 모든 국가의 상위 레벨 도메인에 대한 TLD 서버가 있다
  - 책임 DNS 서버에 대한 IP 주소를 제공한다.
- 책임 DNS 서버
  - 각 기관이 보유하고있는 도메인에 속하는 호스트네임 매핑의 책임을 자기가 관리한다.
- 로컬 DNS 서버
  - 내부 사용자들은 우선 로컬 서버에 물어봄

#### DNS 레코드

각 레코드는 4개의 튜플로 구성됨. name, value, type, ttl

- type
  - a
    - name = hostname, value = ip address
  - ns
    - name = domain, value = hostname
  - cname
  - mx

2개의 레코드가 한 쌍으로 같이다님 (NS, A)

**DNS 데이터베이스에 레코드 삽입**
새 기관을 만들면 (책임 서버) 최상위 레벨 도메인 서버에 등록해야함. 2개의 레코드(NS, A) 등록

## 소켓

프로세스들 사이의 메시지 교환하기위해 통신을 위한 인터페이스

TCP 기반 소켓

소켓 타입

- 소켓 스트림 - TCP 기반 소켓
- 소켓 데이터그램 - UDP 기반 소켓

#### TCP 기반 소켓

서버 소켓 생성 후 특정 포트에 바인드함. 클라이언트로부터 요청이 올때까지 기다림
클라이언트는 서버와 연결되면 데이터 송수신

#### UDP 기반 소켓

서버는 소켓 생성, 포트 바인드 후 바로 메시지 주고받음
클라이언트는 커넥션 과정이 없이 데이터 송수신

## 이메일

이메일 시스템 3개의 주요 요소

- 유저 에이전트 - outlook, thunderbird 등
- mail server - gmail, naver mail 등
- SMTP(Simple Mail Transfer Protocol)

#### 메일 접속 프로토콜

수신하는 사용자 에이전트에서는 SMTP를 사용할 수 없음. SMTP는 push 프로토콜이지만 메시지를 얻는 것은 pull동작이기 때문에 IMAP, HTTP를 사용
